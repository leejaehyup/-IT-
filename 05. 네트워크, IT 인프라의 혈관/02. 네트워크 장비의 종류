2.1 L2 스위치(VLAN)
    스위치는 데이터 링크 계층까지만 참조하여 송신자의 헤더에 포함된 목적지의 MAC 주소를 확인하고, 자신이 가지고 있는
    MAC 주소 테이블을 참조하여 데이터를 전달한다.
    허브와 달리 포트별로 다른 속도를 제공하고, 각각의 포트는 고유의 MAC을 가지고 있다.
    L2의 가장 많이 언급되는 기술이 루프 방지와 VLAN이다.

    1. 루프 방지
        루프란? 네트워크 내에 1개 이상의 스위치가 존재하는 경우 브로드캐스트 패킷이 종료되지 않고 계속 재전파되면서
        대역폭을 소진하게 되는 현상(broadcast storm)을 일으키게 되는 걸 의미한다.
        그래서 보통 서버 구성 시 스위치의 장비의 장애를 대비하여 스위치를 이중으로 구성한다.

        L2 계층에서는 사용자의 MAC 주소 확인을 위해 ICMP(Internet Control Message Protocol) 브로드캐스트가 발생하는데,
        L2 헤더에는 IP 헤더와는 달리 TTL(Time To Live)이 없기 때문에 다른 장비로 전파된 패킷이 계속해서 반복, 재생산되게 되는 것이다.
        이를 해결하기 위한 가장 전통적인 방법은 STP(Spanning Tree Protocol)를 이용하는 것이다.
        스위치 중 하나를 Termination Point로 지정해서 브로드캐스트가 도착하면 강제로 제거해 버리는 것이다.
        그러다 보니 케이블은 양쪽으로 연결되어 있으니 실제적으로는 한쪽으로만 통신이 가능한 Active-Standby 구조가 되어서
        전체 대역폭 중 절반만 활용할 수 있는 단점이 있다.

        그래서 나온 기술이 MLAG(혹은 MC-LAG, Multi-Chassis Link Aggregation)이라는 기술이다.
        이 기술을 활용하면 물리적으로 분리된 장비를 논리적으로 하나의 장비처럼 인식할 수 있는 Active-Active 구조가 되어서
        스위치 장애 발생 시 서비스 중단도 없다.

    2. VLAN(Virtual Local Area Network)
        VLAN이란? 물리적으로 구분된 여러 개의 LAN 구성을 사용 환경에 맞게 논리적으로 확장할 수 있도록 해주는 기술이다.
        만약 장비는 1대인데 2개의 조직이 사용해야 한다면 어떻게 해야 할까? 이럴 때 사용하는 기술이 VLAN이다.
        VLAN을 구성할 때 포트를 지정하게 되는데 이 포트에 연결된 모든 사용자는 같은 VLAN에 소속되게 되어 물리적인 경계가
        없어지고 논리적으로 분리된 네트워크를 구성할 수 있게 된다.
        하드디스크의 파티션과 같은 개념이라고 생각하면 된다.

        그렇기 때문에 VLAN 간에 통신이 필요할 때는 L3 스위치를 통해 라우팅이 되어야한다.
        여러 대의 스위치 간에 VLAN을 구성한 경우에는 해당 도메인만 패킷을 전달하기 위해서 스위치 간 Trunk를 통해서 패킷에
        VLAN 태그를 붙여서 송수신한다.
        그렇다면 Subnet도 네트워크 세그먼트를 분리하며 별도의 그룹을 만드는 방법인데 Subnet과 VLAN의 차이점은 무엇일까?
        Subnet은 네트워크를 쪼개서 논리적인 브로드캐스트 도메인을 만들기 위한 설계에 해당되는 작업이다.
        이 설계에 따라 실제 물리 스위치 혹은 포트를 Subnet에 매핑되도록 구성을 한 것이 VLAN이다.

2.2 L3 스위치와 라우터
    L3 스위치는 자신에게 패킷이 들어오면 해당 패킷의 네트워크 계층에 포함된 송신자 IP 헤더를 확인한다.
    그리고 그 안에 있는 목적지 IP 주소를 확인한 뒤에 자기가 가지고 있는 라우팅 테이블을 참고하여 해당 패킷을 다음 위치의
    장비로 전달하는 역할을 한다.

    L3 스위치와 라우터의 차이점은 IP를 라우팅한다는 측면에서는 두 장비는 같은 역할을 수행하지만, 라우터는 L3 스위치에 비해 훨씬 
    다양한 통신 모듈을 제공한다. ATM, SONET/SDH, TDM, Ethernet 등 다양한 인터페이스를 지원한다.

    ATM(Asynchronous Transfer Mode) - 회선 교환을 실시간으로 가능하게 하고, 패킷 교환을 유연하게 할 수 있는 패킷 교환 기술
    
    TDM(Time Division Multiplexing) - 전통적인 시분할 통신 방식이다. 통신이 있든 없든 동일한 양의 데이터를 전송하는
        동기 모드와 통신이 있을 때만 데이터를 전송하는 비동기 모두 지원한다.
    
    SONET/SDH(Synchronous Optical Networking and Synchronous Digital Hierarchy) - 기가비트급 이상의 전송 속도를 가지는 장거리
        유선망의 광케이블 구간에 적용되고 있는 물리 계층 표준으로, SONET은 미국 표준, SDH는 유럽 표준이다.
        
2.3 L4 스위치(SLB)-(Server Load Balancer)
    TCP의 특징에는 핸드쉐이킹을 통한 TCP 세션 연결과 종료의 특징이 있다.
    세션과 소켓을 혼동되게 사용하는 경우가 많은데, 세션은 일정 시간 같은 사용자(혹은 애플리케이션)로부터 들어오는 일련의 요청을
    동일 상태로 보고 그 상태를 유지해 주는 '논리적 경로'를 말한다.
    그렇다면 소켓은 무엇일까? 소켓은 바로 그러한 '논리적 경로'인 세션을 이용하는 '물리적 경로'라고 보면 된다.
    프로그램에서 통신할 때 스레드(thread)를 통해 소켓을 생성하고, 통신이 종료되면 해당 소켓을 닫게 된다.

    서버의 입장에서는 수많은 사용자들과 연결을 해야 되고, 그중에서 누가 연결이 되고 있는지, 누가 중단을 요청하는지와 같은 관리는 어떻게 할까?
    그런 정보를 담아두는 곳이 '백로그 큐'이다.
    백로그 큐에서는 서버(혹은 송신자)가 보낸 SYN 기록을 남겨두고, 클라이언트(혹은 수신자)의 ACK가 도착했을 때 이것이 본인이 보낸
    SYN에 대한 ACK인지를 백로그 큐에 있는 정보로 확인하는 것이다.
    그러기에 이 백로그 큐가 가득 차 버리면 정상적인 통신이 불가능하다. 이러한 취약점을 이용하는 대표적인 보안 공격이 SYN 플러딩이다.

    L4 스위치는 시스템의 서비스 상태를 모니터링하고 지능적으로 로드밸런싱을 할 수 있는 장비가 필요해지면서 생기게 되었다.
    L4 스위치의 부하분산(로드밸런싱) 방식은 크게 세 가지가 있다.
    첫째는 라운드 로빈 방식이다. 4대의 서버가 있다면 4 - 3 - 2 - 1 - 1 - 2 - 3 - 4 의 순서로 세션을 연결한다.
    두 번째는 최소 연결(least connection)과 응답 시간(response time) 방식이다.
    세션이 적은 서버에 신규로 세션을 연결해 주는 방식와 응답 시간이 빠른 서버에 세션을 연결해 주는 방식이다.
    세 번째는 hash 방식이다. 클라이언트의 IP, 포트 정보를 가지고 고유의 hash key를 만들어서 연결해 주는 방법이다.

2.4 L7 스위치(ADC)-(Application Delivery Controller)
    L7 스위치는 URL, Cookie, Contents와 같은 애플리케이션 정보를 바탕으로 로드밸런싱, 웹 가속, SSL 가속 기능을 제공하는 장비이다.
    1. 웹 캐싱 기능
    2. 웹 압축 기능 - 데이터 전송 시 L4 스위치가 오브젝트를 압축 하여 원본 대비 30%~70%까지 크기를 줄여서 전송하기 때문에
        네트워크 트래픽이 감소되고 전송 시간이 단축되는 장점이 있다. 하지만 압축 작업에 따른 L7 스위치의 부하가 증가하며,
        클라이언트는 전송받은 압축 데이터를 다시 해제해야 한다.
    3. 코드 압축 기능 - js, css, json, html을 결괏값에 영향 없이 압축해주는 기능으로, 주로 공백, 주석 등을 제거한다.
        웹 압축과는 다르게 압축, 해제에 별다른 부하가 발생하지 않는 장점이 있지만, 압축률이 상대적으로 낮고 클라이언트에서느
        압축된 소스가 내려감에 따라 프로그램 오류로 인한 디버깅 시에 소스 해석이 어렵다.
    4. SSL(Secure Socket Layer) 가속 기능 - 서버와 클라이언트 사이에 세션을 맺고 데이터를 암, 복호화하는 데 많은 리소스가
        필요하기 때문에 개별 서버에 SSL 가속 카드 형태로 구성한다.